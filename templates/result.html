<!DOCTYPE html>
<html>
<head>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <title>Scan Result</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h2>Scan Result</h2>
        <p><strong>IP:</strong> {{ ip }}</p>
        <p><strong>Country:</strong> {{ country }}</p>
        <p><strong>Risk Score:</strong> {{ risk_score }}</p>

       {% if risk_score > 60 %}
    <div style="background-color:#ff4d4d; 
                padding:10px; 
                border-radius:8px; 
                width:200px; 
                margin:10px auto; 
                font-weight:bold;">
        üö® HIGH RISK
    </div>

{% elif risk_score > 30 %}
    <div style="background-color:#ff9900; 
                padding:10px; 
                border-radius:8px; 
                width:200px; 
                margin:10px auto; 
                font-weight:bold;">
        ‚ö†Ô∏è MEDIUM RISK
    </div>

{% else %}
    <div style="background-color:#00cc66; 
                padding:10px; 
                border-radius:8px; 
                width:200px; 
                margin:10px auto; 
                font-weight:bold;">
        ‚úÖ LOW RISK
    </div>
{% endif %}
<br>
<a href="/history">View Scan History</a>
<br>
        <a href="/">Scan Another</a>
    </div>
    <div style="width:300px; margin: auto;">
    <canvas id="riskChart"></canvas>
</div>

<script>
var ctx = document.getElementById('riskChart').getContext('2d');

var riskChart = new Chart(ctx, {
    type: 'doughnut',
    data: {
        labels: ['Risk', 'Safe'],
        datasets: [{
            data: [{{ risk_score }}, 100 - {{ risk_score }}],
            backgroundColor: ['#ff4d4d', '#00ff99'],
            borderWidth: 1
        }]
    },
    options: {
        cutout: '70%',
        plugins: {
            legend: {
                labels: {
                    color: "white"
                }
            }
        }
    },
    plugins: [{
        id: 'textCenter',
        beforeDraw: function(chart) {
            var width = chart.width,
                height = chart.height,
                ctx = chart.ctx;

            ctx.restore();
            var fontSize = (height / 6).toFixed(2);
            ctx.font = fontSize + "px Arial";
            ctx.fillStyle = "white";
            ctx.textBaseline = "middle";

            var text = "{{ risk_score }}%",
                textX = Math.round((width - ctx.measureText(text).width) / 2),
                textY = height / 2;

            ctx.fillText(text, textX, textY);
            ctx.save();
        }
    }]
});
</script>
</script>
<footer style="
    text-align:center;
    margin-top:40px;
    padding:15px;
    font-size:14px;
    color:#888;">
    Made by  <strong>Ayush & Tejas </strong>
</footer>
</body>
</html>